__require=function t(e,o,i){function c(n,r){if(!o[n]){if(!e[n]){var s="function"==typeof __require&&__require;if(!r&&s)return s(n,!0);if(a)return a(n,!0);throw new Error("Cannot find module '"+n+"'")}var l=o[n]={exports:{}};e[n][0].call(l.exports,function(t){var o=e[n][1][t];return c(o||t)},l,l.exports,t,e,o,i)}return o[n].exports}for(var a="function"==typeof __require&&__require,n=0;n<i.length;n++)c(i[n]);return c}({Audio:[function(t,e,o){"use strict";cc._RF.push(e,"88c15SoZ8JK04NGqQ0Hkj2W","Audio");cc._RF.pop()},{}],Beat:[function(t,e,o){"use strict";cc._RF.push(e,"773b2dLSY1M3pvhLHGV+KEW","Beat"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Game"),c=function(){function t(e){this.node=null,this.type="don";var o=null;t.Pool.size()>0?(this.node=t.Pool.get(),o=this.node.getComponent(cc.Sprite)):(this.node=new cc.Node("don"),this.node.scale=.5,o=this.node.addComponent(cc.Sprite)),o.spriteFrame="don"==e?t.DonFrame:t.KatsuFrame,this.type=e}return t.prototype.born=function(){var t=this,e=cc.view.getVisibleSize().width-325+35;this.node.position=cc.v2(e,98),this.node.opacity=255,this.node.runAction(cc.sequence([cc.moveTo((e+35)/i.Play.SPEED,-35,98),cc.callFunc(function(){i.Play.beats[0]==t&&i.Play.miss(),t.recycle()})]))},t.prototype.done=function(){var t=this;this.node.stopAllActions();var e=cc.view.getVisibleSize();this.node.runAction(cc.sequence([cc.jumpTo(.6,e.width-325-55-39,215,240,1),cc.fadeOut(.5),cc.callFunc(function(){t.recycle()})]))},t.prototype.beat=function(e){if(this.type.slice(0,3)==e.slice(0,3)){var o=Math.abs(this.node.position.x-81);o<t.GOOD_RANGE?(i.Play.good(),this.done()):o<t.OK_RANGE?(i.Play.ok(),this.done()):o<t.BAD_RANGE&&i.Play.bad()}},t.prototype.recycle=function(){t.Pool.put(this.node)},t.DonFrame=null,t.KatsuFrame=null,t.Pool=new cc.NodePool,t.BAD_RANGE=80,t.OK_RANGE=60,t.GOOD_RANGE=20,t}();o.Basic=c,cc._RF.pop()},{"./Game":"Game"}],Chibi:[function(t,e,o){"use strict";cc._RF.push(e,"6272bGXWwxPrIM7GQrDZtJi","Chibi"),Object.defineProperty(o,"__esModule",{value:!0});var i={};function c(t){for(var e=(cc.view.getVisibleSize().width-325+40)/8,o=[],c=0;c<=8;c++)o.push(cc.v2(c*e,c%2?25:80));t.runAction(cc.sequence([cc.cardinalSplineTo(2,o,0),cc.callFunc(function(){(function(t){i[t.name].put(t)})(t)})]))}var a={takoyaki:function(t){t.getComponent(cc.Animation).play(["sosu","shoyu","sosu_tsumayoji","shoyu_tsumayoji"][Math.max(0,Math.floor(4*Math.random()-.1))]),c(t)},tamashi:function(t){var e=t.getComponent(cc.Animation);e.play("grow"),e.scheduleOnce(function(){e.play("loop")},1),c(t)}};o.Chibi={node:null,prefab:{},create:function(t){t in i||(i[t]=new cc.NodePool);var e=i[t].size()>0?i[t].get():cc.instantiate(o.Chibi.prefab[t]);a[t](e),e.parent=o.Chibi.node}},cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"6a41b/Vj4tNrYWl/hCxHzUH","Game"),Object.defineProperty(o,"__esModule",{value:!0});o.Play={SPEED:200,beats:[],beat:function(t){o.Play.beats[0]&&o.Play.beats[0].beat(t)},score:0,plus:function(t){},ok:function(){},good:function(){},bad:function(){},miss:function(){}},cc._RF.pop()},{}],main:[function(t,e,o){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","main"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Game"),c=t("./Beat"),a=t("./Chibi"),n=cc._decorator,r=n.ccclass,s=n.property,l=0,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.donFrame=null,e.katsuFrame=null,e.nod=null,e.score=null,e.scoreTotal=null,e.scorePlus=null,e.pipeline=null,e.result=null,e.chibi=null,e.takoyakiPrefab=null,e.tamashiPrefab=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;i.Play.plus=function(e){i.Play.score+=e,t.scorePlus.string=String(e),t.scoreTotal.string=String(i.Play.score),t.score.play("score_plus")},i.Play.ok=function(){i.Play.plus(100),t.result.play("ok"),a.Chibi.create("takoyaki"),i.Play.beats.shift()},i.Play.bad=function(){t.result.play("bad"),a.Chibi.create("tamashi"),i.Play.beats.shift()},i.Play.good=function(){i.Play.plus(200),t.result.play("good"),a.Chibi.create("takoyaki"),i.Play.beats.shift()},i.Play.miss=function(){a.Chibi.create("tamashi"),i.Play.beats.shift()},c.Basic.DonFrame=this.donFrame,c.Basic.KatsuFrame=this.katsuFrame,a.Chibi.node=this.chibi,a.Chibi.prefab.takoyaki=this.takoyakiPrefab,a.Chibi.prefab.tamashi=this.tamashiPrefab;var e=cc.sequence([cc.moveBy(4,-324,0),cc.moveBy(0,324,0)]);this.nod.runAction(e.repeatForever()),this.scoreTotal.string=String(0),i.Play.score=0,this.schedule(this.create.bind(this),1)},e.prototype.create=function(){if(++l%4!=0){var t=new c.Basic(l%4<3?"don":"katsu");t.node.parent=this.pipeline,i.Play.beats.push(t),t.born()}},__decorate([s(cc.SpriteFrame)],e.prototype,"donFrame",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"katsuFrame",void 0),__decorate([s(cc.Node)],e.prototype,"nod",void 0),__decorate([s(cc.Animation)],e.prototype,"score",void 0),__decorate([s(cc.Label)],e.prototype,"scoreTotal",void 0),__decorate([s(cc.Label)],e.prototype,"scorePlus",void 0),__decorate([s(cc.Node)],e.prototype,"pipeline",void 0),__decorate([s(cc.Animation)],e.prototype,"result",void 0),__decorate([s(cc.Node)],e.prototype,"chibi",void 0),__decorate([s(cc.Prefab)],e.prototype,"takoyakiPrefab",void 0),__decorate([s(cc.Prefab)],e.prototype,"tamashiPrefab",void 0),e=__decorate([r],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Beat":"Beat","./Chibi":"Chibi","./Game":"Game"}],taiko:[function(t,e,o){"use strict";cc._RF.push(e,"8f87e2O75FPmZ4crphzlfVZ","taiko"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Game"),c=cc._decorator,a=c.ccclass,n=c.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.don_left=null,e.don_right=null,e.katsu_left=null,e.katsu_right=null,e.don=null,e.katsu=null,e.bg=null,e.pipelineShader=null,e.beat=null,e}return __extends(e,t),e.prototype.onEnable=function(){this.don_left.opacity=0,this.don_right.opacity=0,this.katsu_left.opacity=0,this.katsu_right.opacity=0,this.node.on(cc.Node.EventType.TOUCH_START,this.taikoClick,this),this.bg.on(cc.Node.EventType.TOUCH_START,this.bgClick,this)},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.taikoClick,this),this.bg.off(cc.Node.EventType.TOUCH_START,this.bgClick,this)},e.prototype.convertPos=function(t){var e=cc.view.getVisibleSize();return cc.v2(t.x-e.width/2,t.y)},e.prototype.beatDon=function(t){cc.audioEngine.play(this.don,!1,1),t>0?(this.don_right.opacity=190,this.don_right.runAction(cc.fadeOut(.25)),i.Play.beat("don_right")):(this.don_left.opacity=190,this.don_left.runAction(cc.fadeOut(.25)),i.Play.beat("don_left")),this.pipelineShader.stopAllActions(),this.pipelineShader.opacity=80,this.pipelineShader.color=cc.color(247,73,38),this.pipelineShader.runAction(cc.fadeOut(.3))},e.prototype.beatKstsu=function(t){cc.audioEngine.play(this.katsu,!1,1),t>0?(this.katsu_right.opacity=190,this.katsu_right.runAction(cc.fadeOut(.25)),i.Play.beat("katsu_right")):(this.katsu_left.opacity=190,this.katsu_left.runAction(cc.fadeOut(.25)),i.Play.beat("katsu_left")),this.pipelineShader.stopAllActions(),this.pipelineShader.opacity=80,this.pipelineShader.color=cc.color(106,192,193),this.pipelineShader.runAction(cc.fadeOut(.3))},e.prototype.taikoClick=function(t){t.stopPropagation(),this.beat.play();var e=this.convertPos(t.getLocation());e.mag()<300?this.beatDon(e.x):this.beatKstsu(e.x)},e.prototype.bgClick=function(t){t.stopPropagation(),this.beat.play();var e=this.convertPos(t.getLocation());this.beatKstsu(e.x)},__decorate([n(cc.Node)],e.prototype,"don_left",void 0),__decorate([n(cc.Node)],e.prototype,"don_right",void 0),__decorate([n(cc.Node)],e.prototype,"katsu_left",void 0),__decorate([n(cc.Node)],e.prototype,"katsu_right",void 0),__decorate([n({type:cc.AudioClip})],e.prototype,"don",void 0),__decorate([n({type:cc.AudioClip})],e.prototype,"katsu",void 0),__decorate([n(cc.Node)],e.prototype,"bg",void 0),__decorate([n(cc.Node)],e.prototype,"pipelineShader",void 0),__decorate([n(cc.Animation)],e.prototype,"beat",void 0),e=__decorate([a],e)}(cc.Component);o.default=r,cc._RF.pop()},{"./Game":"Game"}]},{},["Audio","Beat","Chibi","Game","main","taiko"]);